# Common request and response

## What's NewID

[NewID definition](NewID-specification.md)

## Request Common Header

| Field            | Type   | Notes                                      |
| ---              | ---    | ---                                        |
| dapp_id           | string | Decentralized Application Id                             |
| req_id           | string | request Id                             |
| method           | string | choices: login,pay,proof.submit     |
| callback  | string | For Mobile Native DApp, it is redirect schema; For website DApp, it is callback url; For in-app DApp, it is HEP-based url.       |
| package_name    | string  | package name of dapp               |
| protocol_version | int    | protocol version, default:2                |
| timestamp        | int    | timestamp                                  |
| nonce            | string | random string or auto-increment sequence                              |
| signature        | string | signature hex string by application owner, format: "secp256r1:0xf9559857bb89e106de1c97bf640a481ff77a6f51e9ba8e8487d43999af0369c4e89eecca9ae085c44506137bc12ef16b24347c6b93b04fee5ef8572818382138". |

The timestamp and nonce fields is for preventing the replay attack.

The sign message is generated by json string exclude signature field.

Example
```
{
  "dapp_id": "32c094b450a1a5f8d81fa681200591a3",
  ...
}
```

## Response Common Header

| Field            | Type   | Notes                                      |
| ---              | ---    | ---                                        |
| req_id           | string | request Id                             |
| errors       | json    | error list, see [error.json](api-style-guide/error.json)         |
| result    | json | response result     |
| signature        | string | secp256r1 signature hex string of authenticated user, format: "0xf9559857bb89e106de1c97bf640a481ff77a6f51e9ba8e8487d43999af0369c4e89eecca9ae085c44506137bc12ef16b24347c6b93b04fee5ef8572818382138". |

Example
```
{
  "req_id": "1",
  "errors": [
  	{
  		"name": "",
  		"debug_id": "",
  		"message": "",
  	}
  ],
  "result":{...}
  ...
}
```

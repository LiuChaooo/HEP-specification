
## NewPay SDK Specification

### What's NewID

[NewID definition](NewID-specification.md)

### Data format of Mobile Native DApps 

#### Request Common Header

| Field            | Type   | Notes                                      |
| ---              | ---    | ---                                        |
| app_id           | string | Application Id                             |
| req_id           | string | request Id                             |
| method           | string | choices: login,pay,proof.submit     |
| schema_protocol  | string | redirect schema of Mobile Native App       |
| bundle_source    | array  | package name of 3rd party Id               |
| protocol_version | int    | protocol version, default:2                |
| timestamp        | int    | timestamp                                  |
| nonce            | string | random string                              |
| signature        | string | secp256r1 signature hex string, format: "0xf9559857bb89e106de1c97bf640a481ff77a6f51e9ba8e8487d43999af0369c4e89eecca9ae085c44506137bc12ef16b24347c6b93b04fee5ef8572818382138". |

The timestamp and nonce fields is for preventing the replay attack.

The sign message is generated by combine the all fields execept signature field.

#### Response Common Header

| Field            | Type   | Notes                                      |
| ---              | ---    | ---                                        |
| req_id           | string | request Id                             |
| error_code       | int    | Error Code, 1:success, others:fail         |
| error_message    | string | error message     |


#### Login

##### Request

| Field            | Type   | Notes                                                      |
| ---              | ---    | ---                                                        |
| scope            | int    | profile type Id. 1: base profile including name,head,newid; 2: advance profile including cellphone  |

##### Response

| Field            | Type   | Notes                                                      |
| ---              | ---    | ---                                                        |
| newid            | string | NewID              |
| name        | string | the user name      |
| country_code     | string | the country code   |
| cellphone        | string | the cellphone      |
| avatar      | string | the avatar of user |

#### Pay

##### Request

| Field            | Type   | Notes                                                      |
| ---              | ---    | ---                                                        |
| merchant_newid     | string | NewID of merchant                                               |
| order_number     | string | order number                                               |
| order_description     | string | order description                                               |
| symbol     | string | symbol of digital token, such as NEW,BTC,ETH                                               |
| quantity     | string | quantity of digital token, unit is the minimum unit of given digital token                                               |

##### Response

| Field            | Type   | Notes                                                      |
| ---              | ---    | ---                                                        |
| txid     | string | Transaction ID                                               |
 

#### Proof

TBD


### Data format of Web DApps 

#### Request Common Header

| Field            | Type   | Notes                                      |
| ---              | ---    | ---                                        |
| app_id           | string | Application Id                             |
| req_id           | string | request Id                             |
| method           | string | choices: login,pay,proof.submit     |
| callback_url  | string | callback url of Web Dapps       |
| protocol_version | int    | protocol version, default:1                |
| timestamp        | int    | timestamp                                  |
| nonce            | string | random string                              |
| signature        | string | secp256r1 signature hex string, format: "0xf9559857bb89e106de1c97bf640a481ff77a6f51e9ba8e8487d43999af0369c4e89eecca9ae085c44506137bc12ef16b24347c6b93b04fee5ef8572818382138". |

The timestamp and nonce fields is for preventing the replay attack.

The sign message is generated by combine the all fields execept signature field.

#### Response Common Header

| Field            | Type   | Notes                                      |
| ---              | ---    | ---                                        |
| error_code       | int    | Error Code, 1:success, others:fail         |
| error_message    | string | error message     |


